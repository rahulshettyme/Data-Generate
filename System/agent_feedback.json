{
  "scriptName": "Add_Farmer_Tag",
  "code": "import requests\nimport json\nimport thread_utils\nimport attribute_utils\n\ndef run(data, token, env_config):\n    base_url = env_config['apiBaseUrl']\n    headers = {'Authorization': f'Bearer {token}'}\n\n    # Initialize cache for master data to be reused across rows\n    cache = {\n        'tag_map': {},  # Maps Tag Name (input) -> Internal Tag ID\n        'id_map': {},   # Maps Farmer ID (from dropdown or direct) -> Internal Farmer ID\n        'code_map': {}  # Maps Farmer Code (from dropdown) -> Internal Farmer ID\n    }\n\n    # Step 2 [API]: Fetch Master Tags\n    # Retrieves a list of all available 'FARMER' type tags and creates a map of tag names to their IDs.\n    try:\n        tag_url = f\"{base_url}/services/master/api/filter?type=FARMER\"\n        tag_resp = requests.get(tag_url, headers=headers)\n        tag_resp.raise_for_status()\n        master_tags = tag_resp.json()\n        for tag in master_tags:\n            if tag.get('name') and tag.get('id'):\n                cache['tag_map'][tag['name']] = tag['id']\n        if not cache['tag_map']:\n            print(\"Warning: No 'FARMER' type tags found from master data service.\")\n            # If no tags are found, tag_map will be empty, which will correctly fail rows\n            # that try to resolve a tag that doesn't exist.\n    except requests.exceptions.RequestException as e:\n        print(f\"Critical Error: Failed to fetch master FARMER tags. All rows requiring a tag lookup may fail. Error: {e}\")\n        cache['tag_map'] = None # Indicate that cache is invalid for lookups\n\n    # Step 3 [API]: Fetch Farmers List (Conditional)\n    # Conditionally fetches a list of all farmers if 'Farmer ID' or 'Farmer Code' is present in any input row.\n    needs_farmer_list_lookup = False\n    for row_item in data: # Use row_item to avoid conflict with 'row' in process_row\n        if row_item.get('Farmer ID') or row_item.get('Farmer Code'):\n            needs_farmer_list_lookup = True\n            break\n\n    if needs_farmer_list_lookup:\n        try:\n            farmers_list_url = f\"{base_url}/services/farm/api/farmers/dropdownList\"\n            farmers_list_resp = requests.get(farmers_list_url, headers=headers)\n            farmers_list_resp.raise_for_status()\n            farmers_list = farmers_list_resp.json()\n            for farmer in farmers_list:\n                if farmer.get('id'):\n                    cache['id_map'][farmer['id']] = farmer['id']\n                    if farmer.get('code'):\n                        cache['code_map'][farmer['code']] = farmer['id']\n            if not cache['id_map'] and needs_farmer_list_lookup:\n                print(\"Warning: Farmer list fetch was required but returned empty. Farmer lookups by code/ID might fail.\")\n                # If no farmers are found, id_map/code_map will be empty, which will correctly fail rows\n                # that try to resolve a farmer that doesn't exist in the dropdown.\n        except requests.exceptions.RequestException as e:\n            print(f\"Critical Error: Failed to fetch farmers dropdown list. Farmer lookups may fail. Error: {e}\")\n            cache['id_map'] = None # Indicate invalid cache for lookups\n            cache['code_map'] = None\n\n    # Define a nested function to process a single row\n    def process_row(row):\n        row_status = 'Fail'\n        row_result = ''\n        target_farmer_id = None\n        target_tag_id = None\n        farmer_data = None\n        \n        # Initialize temporary internal keys\n        row['_target_farmer_id'] = None\n        row['_target_tag_id'] = None\n        row['_farmer_data'] = None\n        row['_tags_updated'] = False\n        row['put_resp'] = None\n\n        try:\n            # Step 5 [LOGIC]: Extracts 'Farmer ID', 'Farmer Code', and 'Tag Name'\n            # Resolves IDs and handles missing/unresolvable inputs.\n            farmer_id_input = row.get('Farmer ID')\n            farmer_code_input = row.get('Farmer Code')\n            tag_name_input = row.get('Tag Name')\n\n            if not tag_name_input:\n                raise ValueError(\"Missing 'Tag Name' in the input row.\")\n            \n            # Resolve target_tag_id using the cached tag_map\n            if cache['tag_map'] is None: # Check if initial tag fetch failed\n                raise RuntimeError(\"Master tag data is unavailable due to a prior error.\")\n            target_tag_id = cache['tag_map'].get(tag_name_input)\n            if not target_tag_id:\n                raise ValueError(f\"Tag name '{tag_name_input}' not found in master 'FARMER' tags.\")\n            row['_target_tag_id'] = target_tag_id\n\n            # Resolve target_farmer_id using 'Farmer ID' or 'Farmer Code'\n            if farmer_id_input:\n                # If ID map is invalid, raise error\n                if cache['id_map'] is None:\n                    raise RuntimeError(\"Farmer ID mapping data is unavailable due to a prior error.\")\n                # Attempt to find in cache. If not found, assume farmer_id_input is directly usable.\n                target_farmer_id = cache['id_map'].get(farmer_id_input, farmer_id_input)\n            elif farmer_code_input:\n                # If code map is invalid, raise error\n                if cache['code_map'] is None:\n                    raise RuntimeError(\"Farmer Code mapping data is unavailable due to a prior error.\")\n                target_farmer_id = cache['code_map'].get(farmer_code_input)\n                if not target_farmer_id:\n                    raise ValueError(f\"Farmer with code '{farmer_code_input}' not found in the farmers list.\")\n            else:\n                raise ValueError(\"Neither 'Farmer ID' nor 'Farmer Code' provided in the input row.\")\n            \n            if not target_farmer_id: # Catch if code lookup returned None\n                raise ValueError(f\"Could not resolve internal Farmer ID for given inputs (ID: '{farmer_id_input}', Code: '{farmer_code_input}').\")\n            row['_target_farmer_id'] = target_farmer_id\n\n            # Step 6 [API]: Get Farmer Details\n            # Fetches the complete details of the target farmer.\n            get_farmer_url = f\"{base_url}/services/farm/api/farmers/{target_farmer_id}\"\n            get_farmer_resp = requests.get(get_farmer_url, headers=headers)\n            get_farmer_resp.raise_for_status() # Raises HTTPError for bad responses (4xx or 5xx)\n            farmer_data = get_farmer_resp.json()\n            row['_farmer_data'] = farmer_data\n\n            # Step 7 [LOGIC]: Extracts and updates tags in farmer data.\n            # Adds the new tag ID if not already present.\n            current_tags = farmer_data.get('tags', [])\n            if target_tag_id not in current_tags:\n                current_tags.append(target_tag_id)\n                farmer_data['tags'] = current_tags\n                row['_tags_updated'] = True\n            else:\n                row_status = 'Success'\n                row_result = f\"Tag '{tag_name_input}' already assigned to Farmer ID '{target_farmer_id}'. No update needed.\"\n                # If tag is already present, we mark as success and skip the PUT request.\n                return row # Early exit as no further action is needed for this row\n\n            # Step 8 [API]: Update Farmer Tags (Only if tags were actually updated)\n            if row['_tags_updated']:\n                # Prepare payload for PUT request.\n                # IMPORTANT: For DTO_FILE type, Content-Type header must NOT be set directly\n                # when `files` parameter is used. Requests library handles this.\n                put_headers = headers.copy()\n                if 'Content-Type' in put_headers:\n                    del put_headers['Content-Type']\n\n                # Inject optional custom attributes into the payload.\n                # Assuming 'Additional Attributes' are at the root level of the farmer DTO.\n                payload_to_send = attribute_utils.add_attributes_to_payload(row, farmer_data, env_config, target_key=None)\n\n                # Construct the multipart/form-data 'dto' part.\n                files = {'dto': (None, json.dumps(payload_to_send), 'application/json')}\n                \n                update_farmer_url = f\"{base_url}/services/farm/api/farmers\"\n                put_resp = requests.put(update_farmer_url, headers=put_headers, files=files)\n                put_resp.raise_for_status()\n                row['put_resp'] = put_resp.json() # Store the response from the update\n                \n                row_status = 'Success'\n                row_result = f\"Successfully added tag '{tag_name_input}' to Farmer ID '{target_farmer_id}'.\"\n\n        except requests.exceptions.HTTPError as e:\n            row_result = f\"API Error (HTTP {e.response.status_code}): {e.response.text}\"\n        except requests.exceptions.ConnectionError as e:\n            row_result = f\"Network Error: Could not connect to the API. {e}\"\n        except requests.exceptions.Timeout as e:\n            row_result = f\"Timeout Error: API request timed out. {e}\"\n        except ValueError as e:\n            row_result = f\"Data Resolution Error: {e}\"\n        except RuntimeError as e:\n            row_result = f\"Configuration/System Error: {e}\"\n        except json.JSONDecodeError as e:\n            row_result = f\"JSON Parsing Error: Could not decode API response. {e}\"\n        except Exception as e:\n            row_result = f\"An unexpected error occurred: {e}\"\n\n        # Step 9 [LOGIC]: Records the success/failure status and API response for the current row.\n        row['status'] = row_status\n        row['result'] = row_result\n        return row\n\n    # Use thread_utils to run process_row function in parallel for each row in data\n    return thread_utils.run_in_parallel(process_row, data)",
  "comments": "check new logs",
  "logs": "DEBUG: Runner Loaded\r\n[API_DEBUG] ----------------------------------------------------------------\r\n[API_DEBUG] ðŸš€ REQUEST: GET https://sf-v2-gcp.cropin.co.in/qa2/services/master/api/filter?type=FARMER\r\n[API_DEBUG] ðŸ”‘ TOKEN META: User: 1234560001 | Tenant: qazone2\r\n[API_DEBUG] ðŸ“¦ PAYLOAD: No Payload\r\n[API_DEBUG] ----------------------------------------------------------------\r\n[API_DEBUG] âœ… RESPONSE [200]\r\n[API_DEBUG] ðŸ“„ BODY: [ {   \"id\" : 3410601,   \"name\" : \"testpavan\",   \"clientId\" : \"ce804f83-95d5-4c07-8628-3f7aa60df5e7\",   \"tagType\" : \"FARMER\",   \"validFrom\" : \"2025-07-01T00:00:00Z\",   \"validTill\" : \"2026-07-09T00:00:00Z\",   \"status\" : \"Active\",   \"description\" : null }, {   \"id\" : 3591201,   \"name\" : \"RS Multi Project Farmer\",   \"clientId\" : \"783f0712-c671-455b-ad8e-81941f53b7d7\",   \"tagType\" : \"FARMER\",   \"validFrom\" : \"2025-07-01T00:00:00Z\",   \"validTill\" : \"2026-07-09T00:00:00Z\",   \"status\" : \"Active\",   \"description\" : null }, {   \"id\" : 5883651,   \"name\" : \"Raja farmer tag 01\",   \"clientId\" : \"e038b6c3-6910-4119-a723-1afc4399a356\",   \"tagType\" : \"FARMER\",   \"validFrom\" : \"2025-07-01T00:00:00Z\",   \"validTill\" : \"2025-07-31T00:00:00Z\",   \"status\" : \"Active\",   \"description\" : null }, {   \"id\" : 5883652,   \"name\" : \"Raja farmer tag 02\",   \"clientId\" : \"2cc939c9-608c-4557-bcb0-4b7923c8bde0\",   \"tagType\" : \"FARMER\",   \"validFrom\" : \"2025-07-23T00:00:00Z\",   \"validTill\" : \"2025-07-31T00:00:00Z\",   \"stat\r\n[API_DEBUG] ----------------------------------------------------------------\r\n\r\n[API_DEBUG] ----------------------------------------------------------------\r\n[API_DEBUG] ðŸš€ REQUEST: GET https://sf-v2-gcp.cropin.co.in/qa2/services/farm/api/farmers/dropdownList\r\n[API_DEBUG] ðŸ”‘ TOKEN META: User: 1234560001 | Tenant: qazone2\r\n[API_DEBUG] ðŸ“¦ PAYLOAD: No Payload\r\n[API_DEBUG] ----------------------------------------------------------------\r\n[API_DEBUG] âœ… RESPONSE [200]\r\n[API_DEBUG] ðŸ“„ BODY: [ {   \"id\" : 5775643,   \"firstName\" : \"0805- bulk fill\",   \"lastName\" : null,   \"data\" : {     \"rajaNewAddAttr02\" : \"test2\",     \"rajaNewAddAttr03\" : 888,     \"rajaNewAddAttr01\" : \"test\",     \"countryCode\" : \"+91\",     \"mobileNumber\" : \"87654678\",     \"tags\" : [ 5921851 ]   },   \"farmerCode\" : \"0805- bulk fill\",   \"email\" : null }, {   \"id\" : 5759552,   \"firstName\" : \"1003 f\",   \"lastName\" : null,   \"data\" : {     \"countryCode\" : \"+91\",     \"mobileNumber\" : \"5432343\"   },   \"farmerCode\" : \"1003 f1\",   \"email\" : null }, {   \"id\" : 5767352,   \"firstName\" : \"1111001Farmer11\",   \"lastName\" : null,   \"data\" : {     \"countryCode\" : \"+91\",     \"mobileNumber\" : \"4353454354\"   },   \"farmerCode\" : \"1111001Farmer\",   \"email\" : null }, {   \"id\" : 5778201,   \"firstName\" : \"1205f1\",   \"lastName\" : null,   \"data\" : {     \"countryIsoCode\" : \"in\",     \"countryCode\" : \"+91\",     \"mobileNumber\" : \"12345678\",     \"projectClientId\" : \"9fe4fc6a-bdf6-46fa-9dbb-2b29993dc8e2\",     \"tags\" : [ 5921851 ]   },   \"\r\n[API_DEBUG] ----------------------------------------------------------------\r\n\r\n[API_DEBUG] ----------------------------------------------------------------\r\n[API_DEBUG] ðŸš€ REQUEST: GET https://sf-v2-gcp.cropin.co.in/qa2/services/farm/api/farmers/3952601\r\n[API_DEBUG] ðŸ”‘ TOKEN META: User: 1234560001 | Tenant: qazone2\r\n[API_DEBUG] ðŸ“¦ PAYLOAD: No Payload\r\n[API_DEBUG] ----------------------------------------------------------------\r\n[API_DEBUG] ----------------------------------------------------------------\r\n[API_DEBUG] ðŸš€ REQUEST: GET https://sf-v2-gcp.cropin.co.in/qa2/services/farm/api/farmers/3952701\r\n[API_DEBUG] ðŸ”‘ TOKEN META: User: 1234560001 | Tenant: qazone2\r\n[API_DEBUG] ðŸ“¦ PAYLOAD: No Payload\r\n[API_DEBUG] ----------------------------------------------------------------\r\n[API_DEBUG] âœ… RESPONSE [200]\r\n[API_DEBUG] ðŸ“„ BODY: {   \"id\" : 3952701,   \"firstName\" : \"RS Dashboard F 2\",   \"lastName\" : null,   \"gender\" : null,   \"images\" : { },   \"status\" : \"DISABLE\",   \"data\" : {     \"rajaNewAddAttr02\" : \"test2\",     \"rajaNewAddAttr01\" : \"123\",     \"countryCode\" : \"+91\",     \"mobileNumber\" : \"9125130202\",     \"tags\" : [ 5921851 ]   },   \"contractorId\" : null,   \"contractorName\" : null,   \"contractorLocation\" : null,   \"clientId\" : \"e0df6cfd-d150-4d73-a50c-f101bb0f4a23\",   \"declaredArea\" : null,   \"address\" : {     \"id\" : 3952751,     \"formattedAddress\" : \"Madhugiri, Karnataka 572132, India\",     \"postalCode\" : \"572132\",     \"locality\" : \"Madhugiri\",     \"data\" : null,     \"administrativeAreaLevel5\" : null,     \"administrativeAreaLevel4\" : null,     \"administrativeAreaLevel3\" : null,     \"administrativeAreaLevel2\" : \"Bangalore Division\",     \"administrativeAreaLevel1\" : \"Karnataka\",     \"country\" : \"India\",     \"latitude\" : 13.6643166,     \"longitude\" : 77.20889869999999,     \"placeId\" : \"ChIJsfkoVqO0sTsRLbvVqd06c\r\n[API_DEBUG] ----------------------------------------------------------------\r\n\r\n[API_DEBUG] ----------------------------------------------------------------\r\n[API_DEBUG] ðŸš€ REQUEST: PUT https://sf-v2-gcp.cropin.co.in/qa2/services/farm/api/farmers\r\n[API_DEBUG] ðŸ”‘ TOKEN META: User: 1234560001 | Tenant: qazone2\r\n[API_DEBUG] ðŸ“¦ PAYLOAD: No Payload\r\n[API_DEBUG] ----------------------------------------------------------------\r\n[API_DEBUG] âœ… RESPONSE [200]\r\n[API_DEBUG] ðŸ“„ BODY: {   \"id\" : 3952601,   \"firstName\" : \"RS Dashboard F 1\",   \"lastName\" : null,   \"gender\" : null,   \"images\" : { },   \"status\" : \"DISABLE\",   \"data\" : {     \"rajaNewAddAttr02\" : \"test2\",     \"rajaNewAddAttr01\" : \"123\",     \"countryCode\" : \"+91\",     \"mobileNumber\" : \"9125130201\",     \"tags\" : [ ]   },   \"contractorId\" : null,   \"contractorName\" : null,   \"contractorLocation\" : null,   \"clientId\" : \"eaedeb65-90d6-42f6-8b86-40515d56a3be\",   \"declaredArea\" : null,   \"address\" : {     \"id\" : 3952651,     \"formattedAddress\" : \"Madhugiri, Karnataka 572132, India\",     \"postalCode\" : \"572132\",     \"locality\" : \"Madhugiri\",     \"data\" : null,     \"administrativeAreaLevel5\" : null,     \"administrativeAreaLevel4\" : null,     \"administrativeAreaLevel3\" : null,     \"administrativeAreaLevel2\" : \"Bangalore Division\",     \"administrativeAreaLevel1\" : \"Karnataka\",     \"country\" : \"India\",     \"latitude\" : 13.6643166,     \"longitude\" : 77.20889869999999,     \"placeId\" : \"ChIJsfkoVqO0sTsRLbvVqd06cTU\",    \r\n[API_DEBUG] ----------------------------------------------------------------\r\n\r\n[API_DEBUG] ----------------------------------------------------------------\r\n[API_DEBUG] ðŸš€ REQUEST: PUT https://sf-v2-gcp.cropin.co.in/qa2/services/farm/api/farmers\r\n[API_DEBUG] ðŸ”‘ TOKEN META: User: 1234560001 | Tenant: qazone2\r\n[API_DEBUG] ðŸ“¦ PAYLOAD: No Payload\r\n[API_DEBUG] ----------------------------------------------------------------\r\n[API_DEBUG] âœ… RESPONSE [200]\r\n[API_DEBUG] ðŸ“„ BODY: {   \"id\" : 3952601,   \"firstName\" : \"RS Dashboard F 1\",   \"lastName\" : null,   \"gender\" : null,   \"images\" : { },   \"status\" : \"DISABLE\",   \"data\" : {     \"rajaNewAddAttr02\" : \"test2\",     \"rajaNewAddAttr01\" : \"123\",     \"countryCode\" : \"+91\",     \"mobileNumber\" : \"9125130201\",     \"tags\" : [ ]   },   \"contractorId\" : null,   \"contractorName\" : null,   \"contractorLocation\" : null,   \"clientId\" : \"eaedeb65-90d6-42f6-8b86-40515d56a3be\",   \"declaredArea\" : null,   \"address\" : {     \"id\" : 3952651,     \"formattedAddress\" : \"Madhugiri, Karnataka 572132, India\",     \"postalCode\" : \"572132\",     \"locality\" : \"Madhugiri\",     \"data\" : null,     \"administrativeAreaLevel5\" : null,     \"administrativeAreaLevel4\" : null,     \"administrativeAreaLevel3\" : null,     \"administrativeAreaLevel2\" : \"Bangalore Division\",     \"administrativeAreaLevel1\" : \"Karnataka\",     \"country\" : \"India\",     \"latitude\" : 13.6643166,     \"longitude\" : 77.20889869999999,     \"placeId\" : \"ChIJsfkoVqO0sTsRLbvVqd06cTU\",    \r\n[API_DEBUG] ----------------------------------------------------------------\r\n\r\n[API_DEBUG] âœ… RESPONSE [200]\r\n[API_DEBUG] ðŸ“„ BODY: {   \"id\" : 3952701,   \"firstName\" : \"RS Dashboard F 2\",   \"lastName\" : null,   \"gender\" : null,   \"images\" : { },   \"status\" : \"DISABLE\",   \"data\" : {     \"rajaNewAddAttr02\" : \"test2\",     \"rajaNewAddAttr01\" : \"123\",     \"countryCode\" : \"+91\",     \"mobileNumber\" : \"9125130202\",     \"tags\" : [ 5921851 ]   },   \"contractorId\" : null,   \"contractorName\" : null,   \"contractorLocation\" : null,   \"clientId\" : \"e0df6cfd-d150-4d73-a50c-f101bb0f4a23\",   \"declaredArea\" : null,   \"address\" : {     \"id\" : 3952751,     \"formattedAddress\" : \"Madhugiri, Karnataka 572132, India\",     \"postalCode\" : \"572132\",     \"locality\" : \"Madhugiri\",     \"data\" : null,     \"administrativeAreaLevel5\" : null,     \"administrativeAreaLevel4\" : null,     \"administrativeAreaLevel3\" : null,     \"administrativeAreaLevel2\" : \"Bangalore Division\",     \"administrativeAreaLevel1\" : \"Karnataka\",     \"country\" : \"India\",     \"latitude\" : 13.6643166,     \"longitude\" : 77.20889869999999,     \"placeId\" : \"ChIJsfkoVqO0sTsRLbvVqd06c\r\n[API_DEBUG] ----------------------------------------------------------------\r\n\r\n\r\n\r\n\r\n---JSON_START---\r\n{\"status\": \"success\", \"data\": [{\"Farmer Name\": \"RS Dashboard F 1\", \"Farmer ID\": 3952601, \"Tag Name\": \"RS Test Multi Select\", \"_target_farmer_id\": 3952601, \"_target_tag_id\": 5921851, \"_farmer_data\": {\"id\": 3952601, \"firstName\": \"RS Dashboard F 1\", \"lastName\": null, \"gender\": null, \"images\": {}, \"status\": \"DISABLE\", \"data\": {\"rajaNewAddAttr02\": \"test2\", \"rajaNewAddAttr01\": \"123\", \"countryCode\": \"+91\", \"mobileNumber\": \"9125130201\", \"tags\": []}, \"contractorId\": null, \"contractorName\": null, \"contractorLocation\": null, \"clientId\": \"eaedeb65-90d6-42f6-8b86-40515d56a3be\", \"declaredArea\": null, \"address\": {\"id\": 3952651, \"formattedAddress\": \"Madhugiri, Karnataka 572132, India\", \"postalCode\": \"572132\", \"locality\": \"Madhugiri\", \"data\": null, \"administrativeAreaLevel5\": null, \"administrativeAreaLevel4\": null, \"administrativeAreaLevel3\": null, \"administrativeAreaLevel2\": \"Bangalore Division\", \"administrativeAreaLevel1\": \"Karnataka\", \"country\": \"India\", \"latitude\": 13.6643166, \"longitude\": 77.20889869999999, \"placeId\": \"ChIJsfkoVqO0sTsRLbvVqd06cTU\", \"sublocalityLevel1\": \"\", \"sublocalityLevel2\": \"\", \"sublocalityLevel3\": null, \"sublocalityLevel4\": null, \"sublocalityLevel5\": null, \"houseNo\": \"\", \"buildingName\": \"\", \"landmark\": \"\", \"clientId\": \"1a7bf4aa-bc0e-4658-93b9-083c4b827478\"}, \"farmerCode\": \"RSDF1\", \"isDeleted\": false, \"email\": null, \"deviceToken\": null, \"deviceType\": null, \"isAcreSquareEnabled\": null, \"isGDPRCompliant\": true, \"companyId\": 1251, \"createdDate\": \"2025-02-13T05:13:16.331Z\", \"lastModifiedDate\": \"2026-01-08T02:55:37.646Z\", \"loginType\": null, \"externalId\": null, \"assignedTo\": [{\"id\": 3388201, \"name\": \"RS qa2 user 1\", \"data\": {\"geoIds\": [656497], \"environment\": \"dev\", \"isExecutiveProfileEnabled\": true, \"isSREnabled\": true, \"srRegionEnabled\": true}, \"assignedManagersName\": [], \"conversionFactor\": null, \"managers\": [3426151], \"userStatus\": \"ACTIVE\", \"location\": null, \"contactNumber\": \"1234560001\", \"email\": \"rsqazone2user1@cropin.com\", \"preferences\": {\"id\": 3388251, \"currency\": \"INR\", \"language\": \"en\", \"timeZone\": \"IST\", \"areaUnits\": \"ACRE\", \"locale\": \"en-IN\", \"data\": {\"cropPreferences\": [], \"cropUnit\": \"Tons\", \"planTypePreferences\": [], \"farmerTag\": [], \"assetTag\": [], \"caTag\": [], \"precipitationUnit\": \"Inches\", \"tempratureUnit\": \"Celsius\", \"projectPreferences\": [{\"id\": 2405651, \"name\": \"RS Test Plot Risk\", \"status\": \"CURRENT\"}, {\"id\": 3587001, \"name\": \"RS Multi Project 1\", \"status\": \"CURRENT\"}, {\"id\": 3574751, \"name\": \"RS Dashboard Map testing\", \"status\": \"CURRENT\"}, {\"id\": 3587601, \"name\": \"RS Multi Project 2\", \"status\": \"CURRENT\"}, {\"id\": 3587602, \"name\": \"RS Multi Project 3\", \"status\": \"CURRENT\"}, {\"id\": 5918751, \"name\": \"RS PR Filter 21\", \"status\": \"CURRENT\"}, {\"id\": 5925601, \"name\": \"RS PR UAT 4 qazone2\", \"status\": \"CURRENT\"}, {\"id\": 5927351, \"name\": \"RS New UI testing\", \"status\": \"CURRENT\"}, {\"id\": 5928601, \"name\": \"new-Project-18-12-25-001\", \"status\": \"CURRENT\"}, {\"id\": 5928603, \"name\": \"RS PR UAT 5 qazone2\", \"status\": \"CURRENT\"}]}, \"locations\": null}, \"address\": null, \"assignedTo\": null, \"managersName\": null, \"companyId\": 1251, \"parentCompanyId\": null, \"userRoleId\": 3571401, \"userRoleName\": \"RS New Planet user role\", \"correspondingKcId\": null, \"resources\": null, \"countryCode\": \"+91\", \"companyStatus\": null, \"clientId\": \"140c434e-73a5-43c6-8105-07a0111cc263\", \"images\": {}, \"companyPreferences\": null, \"locations\": {\"id\": 2901, \"name\": \"Madhugiri\", \"administrativeAreaLevel5\": null, \"administrativeAreaLevel4\": null, \"administrativeAreaLevel3\": null, \"administrativeAreaLevel2\": \"Tumkur\", \"administrativeAreaLevel1\": \"Karnataka\", \"country\": \"India\", \"latitude\": null, \"longitude\": null, \"sublocalityLevel1\": null, \"sublocalityLevel2\": null, \"sublocalityLevel3\": null, \"sublocalityLevel4\": null, \"sublocalityLevel5\": null, \"geoInfo\": {\"type\": \"FeatureCollection\", \"features\": [{\"type\": \"Feature\", \"geometry\": {\"type\": \"Polygon\", \"coordinates\": [[[77.20161447330734, 13.65524492156377], [77.22195632577765, 13.65524492156377], [77.22195632577765, 13.66900637679743], [77.20161447330734, 13.66900637679743], [77.20161447330734, 13.65524492156377]]]}, \"properties\": {}}]}, \"bounds\": {\"southwest\": {\"lat\": 13.65524492156377, \"lng\": 77.20161447330734}, \"northeast\": {\"lat\": 13.66900637679743, \"lng\": 77.22195632577765}}, \"placeId\": \"ChIJsfkoVqO0sTsRLbvVqd06cTU\"}, \"enabled\": true, \"isAcreSquareUser\": false, \"isGDPRCompliant\": true, \"lastModifiedDate\": \"2026-01-07T09:46:38.318Z\", \"loginType\": null, \"executiveRoleUser\": false, \"preferredName\": \"1234560001\", \"deviceToken\": null, \"deviceType\": null, \"createdBy\": \"2899701\", \"lastModifiedBy\": \"3388201\", \"deleted\": false}], \"massUpload\": false, \"deleted\": false, \"acreSquareEnabled\": null, \"tags\": [5921851]}, \"_tags_updated\": true, \"put_resp\": {\"id\": 3952601, \"firstName\": \"RS Dashboard F 1\", \"lastName\": null, \"gender\": null, \"images\": {}, \"status\": \"DISABLE\", \"data\": {\"rajaNewAddAttr02\": \"test2\", \"rajaNewAddAttr01\": \"123\", \"countryCode\": \"+91\", \"mobileNumber\": \"9125130201\", \"tags\": []}, \"contractorId\": null, \"contractorName\": null, \"contractorLocation\": null, \"clientId\": \"eaedeb65-90d6-42f6-8b86-40515d56a3be\", \"declaredArea\": null, \"address\": {\"id\": 3952651, \"formattedAddress\": \"Madhugiri, Karnataka 572132, India\", \"postalCode\": \"572132\", \"locality\": \"Madhugiri\", \"data\": null, \"administrativeAreaLevel5\": null, \"administrativeAreaLevel4\": null, \"administrativeAreaLevel3\": null, \"administrativeAreaLevel2\": \"Bangalore Division\", \"administrativeAreaLevel1\": \"Karnataka\", \"country\": \"India\", \"latitude\": 13.6643166, \"longitude\": 77.20889869999999, \"placeId\": \"ChIJsfkoVqO0sTsRLbvVqd06cTU\", \"sublocalityLevel1\": \"\", \"sublocalityLevel2\": \"\", \"sublocalityLevel3\": null, \"sublocalityLevel4\": null, \"sublocalityLevel5\": null, \"houseNo\": \"\", \"buildingName\": \"\", \"landmark\": \"\", \"clientId\": \"1a7bf4aa-bc0e-4658-93b9-083c4b827478\"}, \"farmerCode\": \"RSDF1\", \"isDeleted\": false, \"email\": null, \"deviceToken\": null, \"deviceType\": null, \"isAcreSquareEnabled\": null, \"isGDPRCompliant\": true, \"companyId\": 1251, \"createdDate\": \"2025-02-13T05:13:16.331Z\", \"lastModifiedDate\": \"2026-01-08T02:57:50.174Z\", \"loginType\": null, \"externalId\": null, \"assignedTo\": [{\"id\": 3388201, \"name\": \"RS qa2 user 1\", \"data\": {\"geoIds\": [656497], \"environment\": \"dev\", \"isExecutiveProfileEnabled\": true, \"isSREnabled\": true, \"srRegionEnabled\": true}, \"assignedManagersName\": [], \"conversionFactor\": null, \"managers\": [3426151], \"userStatus\": \"ACTIVE\", \"location\": null, \"contactNumber\": \"1234560001\", \"email\": \"rsqazone2user1@cropin.com\", \"preferences\": {\"id\": 3388251, \"currency\": \"INR\", \"language\": \"en\", \"timeZone\": \"IST\", \"areaUnits\": \"ACRE\", \"locale\": \"en-IN\", \"data\": {\"cropPreferences\": [], \"cropUnit\": \"Tons\", \"planTypePreferences\": [], \"farmerTag\": [], \"assetTag\": [], \"caTag\": [], \"precipitationUnit\": \"Inches\", \"tempratureUnit\": \"Celsius\", \"projectPreferences\": [{\"id\": 2405651, \"name\": \"RS Test Plot Risk\", \"status\": \"CURRENT\"}, {\"id\": 3587001, \"name\": \"RS Multi Project 1\", \"status\": \"CURRENT\"}, {\"id\": 3574751, \"name\": \"RS Dashboard Map testing\", \"status\": \"CURRENT\"}, {\"id\": 3587601, \"name\": \"RS Multi Project 2\", \"status\": \"CURRENT\"}, {\"id\": 3587602, \"name\": \"RS Multi Project 3\", \"status\": \"CURRENT\"}, {\"id\": 5918751, \"name\": \"RS PR Filter 21\", \"status\": \"CURRENT\"}, {\"id\": 5925601, \"name\": \"RS PR UAT 4 qazone2\", \"status\": \"CURRENT\"}, {\"id\": 5927351, \"name\": \"RS New UI testing\", \"status\": \"CURRENT\"}, {\"id\": 5928601, \"name\": \"new-Project-18-12-25-001\", \"status\": \"CURRENT\"}, {\"id\": 5928603, \"name\": \"RS PR UAT 5 qazone2\", \"status\": \"CURRENT\"}]}, \"locations\": null}, \"address\": null, \"assignedTo\": null, \"managersName\": null, \"companyId\": 1251, \"parentCompanyId\": null, \"userRoleId\": 3571401, \"userRoleName\": \"RS New Planet user role\", \"correspondingKcId\": null, \"resources\": null, \"countryCode\": \"+91\", \"companyStatus\": null, \"clientId\": \"140c434e-73a5-43c6-8105-07a0111cc263\", \"images\": {}, \"companyPreferences\": null, \"locations\": {\"id\": 2901, \"name\": \"Madhugiri\", \"administrativeAreaLevel5\": null, \"administrativeAreaLevel4\": null, \"administrativeAreaLevel3\": null, \"administrativeAreaLevel2\": \"Tumkur\", \"administrativeAreaLevel1\": \"Karnataka\", \"country\": \"India\", \"latitude\": null, \"longitude\": null, \"sublocalityLevel1\": null, \"sublocalityLevel2\": null, \"sublocalityLevel3\": null, \"sublocalityLevel4\": null, \"sublocalityLevel5\": null, \"geoInfo\": {\"type\": \"FeatureCollection\", \"features\": [{\"type\": \"Feature\", \"geometry\": {\"type\": \"Polygon\", \"coordinates\": [[[77.20161447330734, 13.65524492156377], [77.22195632577765, 13.65524492156377], [77.22195632577765, 13.66900637679743], [77.20161447330734, 13.66900637679743], [77.20161447330734, 13.65524492156377]]]}, \"properties\": {}}]}, \"bounds\": {\"southwest\": {\"lat\": 13.65524492156377, \"lng\": 77.20161447330734}, \"northeast\": {\"lat\": 13.66900637679743, \"lng\": 77.22195632577765}}, \"placeId\": \"ChIJsfkoVqO0sTsRLbvVqd06cTU\"}, \"enabled\": true, \"isAcreSquareUser\": false, \"isGDPRCompliant\": true, \"lastModifiedDate\": \"2026-01-07T09:46:38.318Z\", \"loginType\": null, \"executiveRoleUser\": false, \"preferredName\": \"1234560001\", \"deviceToken\": null, \"deviceType\": null, \"createdBy\": \"2899701\", \"lastModifiedBy\": \"3388201\", \"deleted\": false}], \"massUpload\": false, \"deleted\": false, \"acreSquareEnabled\": null}, \"status\": \"Success\", \"result\": \"Successfully added tag 'RS Test Multi Select' to Farmer ID '3952601'.\"}, {\"Farmer Name\": \"RS Dashboard F 2\", \"Farmer ID\": 3952701, \"Tag Name\": \"Raja farmer UAT check active\", \"_target_farmer_id\": 3952701, \"_target_tag_id\": 5900253, \"_farmer_data\": {\"id\": 3952701, \"firstName\": \"RS Dashboard F 2\", \"lastName\": null, \"gender\": null, \"images\": {}, \"status\": \"DISABLE\", \"data\": {\"rajaNewAddAttr02\": \"test2\", \"rajaNewAddAttr01\": \"123\", \"countryCode\": \"+91\", \"mobileNumber\": \"9125130202\", \"tags\": [5921851]}, \"contractorId\": null, \"contractorName\": null, \"contractorLocation\": null, \"clientId\": \"e0df6cfd-d150-4d73-a50c-f101bb0f4a23\", \"declaredArea\": null, \"address\": {\"id\": 3952751, \"formattedAddress\": \"Madhugiri, Karnataka 572132, India\", \"postalCode\": \"572132\", \"locality\": \"Madhugiri\", \"data\": null, \"administrativeAreaLevel5\": null, \"administrativeAreaLevel4\": null, \"administrativeAreaLevel3\": null, \"administrativeAreaLevel2\": \"Bangalore Division\", \"administrativeAreaLevel1\": \"Karnataka\", \"country\": \"India\", \"latitude\": 13.6643166, \"longitude\": 77.20889869999999, \"placeId\": \"ChIJsfkoVqO0sTsRLbvVqd06cTU\", \"sublocalityLevel1\": \"\", \"sublocalityLevel2\": \"\", \"sublocalityLevel3\": null, \"sublocalityLevel4\": null, \"sublocalityLevel5\": null, \"houseNo\": \"\", \"buildingName\": \"\", \"landmark\": \"\", \"clientId\": \"3bbef759-8ab1-4cbb-a9b3-0326bdd1a22b\"}, \"farmerCode\": \"RSDF2\", \"isDeleted\": false, \"email\": null, \"deviceToken\": null, \"deviceType\": null, \"isAcreSquareEnabled\": null, \"isGDPRCompliant\": true, \"companyId\": 1251, \"createdDate\": \"2025-02-13T05:13:55.461Z\", \"lastModifiedDate\": \"2026-01-08T02:56:14.407Z\", \"loginType\": null, \"externalId\": null, \"assignedTo\": [{\"id\": 3388201, \"name\": \"RS qa2 user 1\", \"data\": {\"geoIds\": [656497], \"environment\": \"dev\", \"isExecutiveProfileEnabled\": true, \"isSREnabled\": true, \"srRegionEnabled\": true}, \"assignedManagersName\": [], \"conversionFactor\": null, \"managers\": [3426151], \"userStatus\": \"ACTIVE\", \"location\": null, \"contactNumber\": \"1234560001\", \"email\": \"rsqazone2user1@cropin.com\", \"preferences\": {\"id\": 3388251, \"currency\": \"INR\", \"language\": \"en\", \"timeZone\": \"IST\", \"areaUnits\": \"ACRE\", \"locale\": \"en-IN\", \"data\": {\"cropPreferences\": [], \"cropUnit\": \"Tons\", \"planTypePreferences\": [], \"farmerTag\": [], \"assetTag\": [], \"caTag\": [], \"precipitationUnit\": \"Inches\", \"tempratureUnit\": \"Celsius\", \"projectPreferences\": [{\"id\": 2405651, \"name\": \"RS Test Plot Risk\", \"status\": \"CURRENT\"}, {\"id\": 3587001, \"name\": \"RS Multi Project 1\", \"status\": \"CURRENT\"}, {\"id\": 3574751, \"name\": \"RS Dashboard Map testing\", \"status\": \"CURRENT\"}, {\"id\": 3587601, \"name\": \"RS Multi Project 2\", \"status\": \"CURRENT\"}, {\"id\": 3587602, \"name\": \"RS Multi Project 3\", \"status\": \"CURRENT\"}, {\"id\": 5918751, \"name\": \"RS PR Filter 21\", \"status\": \"CURRENT\"}, {\"id\": 5925601, \"name\": \"RS PR UAT 4 qazone2\", \"status\": \"CURRENT\"}, {\"id\": 5927351, \"name\": \"RS New UI testing\", \"status\": \"CURRENT\"}, {\"id\": 5928601, \"name\": \"new-Project-18-12-25-001\", \"status\": \"CURRENT\"}, {\"id\": 5928603, \"name\": \"RS PR UAT 5 qazone2\", \"status\": \"CURRENT\"}]}, \"locations\": null}, \"address\": null, \"assignedTo\": null, \"managersName\": null, \"companyId\": 1251, \"parentCompanyId\": null, \"userRoleId\": 3571401, \"userRoleName\": \"RS New Planet user role\", \"correspondingKcId\": null, \"resources\": null, \"countryCode\": \"+91\", \"companyStatus\": null, \"clientId\": \"140c434e-73a5-43c6-8105-07a0111cc263\", \"images\": {}, \"companyPreferences\": null, \"locations\": {\"id\": 2901, \"name\": \"Madhugiri\", \"administrativeAreaLevel5\": null, \"administrativeAreaLevel4\": null, \"administrativeAreaLevel3\": null, \"administrativeAreaLevel2\": \"Tumkur\", \"administrativeAreaLevel1\": \"Karnataka\", \"country\": \"India\", \"latitude\": null, \"longitude\": null, \"sublocalityLevel1\": null, \"sublocalityLevel2\": null, \"sublocalityLevel3\": null, \"sublocalityLevel4\": null, \"sublocalityLevel5\": null, \"geoInfo\": {\"type\": \"FeatureCollection\", \"features\": [{\"type\": \"Feature\", \"geometry\": {\"type\": \"Polygon\", \"coordinates\": [[[77.20161447330734, 13.65524492156377], [77.22195632577765, 13.65524492156377], [77.22195632577765, 13.66900637679743], [77.20161447330734, 13.66900637679743], [77.20161447330734, 13.65524492156377]]]}, \"properties\": {}}]}, \"bounds\": {\"southwest\": {\"lat\": 13.65524492156377, \"lng\": 77.20161447330734}, \"northeast\": {\"lat\": 13.66900637679743, \"lng\": 77.22195632577765}}, \"placeId\": \"ChIJsfkoVqO0sTsRLbvVqd06cTU\"}, \"enabled\": true, \"isAcreSquareUser\": false, \"isGDPRCompliant\": true, \"lastModifiedDate\": \"2026-01-07T09:46:38.318Z\", \"loginType\": null, \"executiveRoleUser\": false, \"preferredName\": \"1234560001\", \"deviceToken\": null, \"deviceType\": null, \"createdBy\": \"2899701\", \"lastModifiedBy\": \"3388201\", \"deleted\": false}], \"massUpload\": false, \"deleted\": false, \"acreSquareEnabled\": null, \"tags\": [5900253]}, \"_tags_updated\": true, \"put_resp\": {\"id\": 3952701, \"firstName\": \"RS Dashboard F 2\", \"lastName\": null, \"gender\": null, \"images\": {}, \"status\": \"DISABLE\", \"data\": {\"rajaNewAddAttr02\": \"test2\", \"rajaNewAddAttr01\": \"123\", \"countryCode\": \"+91\", \"mobileNumber\": \"9125130202\", \"tags\": [5921851]}, \"contractorId\": null, \"contractorName\": null, \"contractorLocation\": null, \"clientId\": \"e0df6cfd-d150-4d73-a50c-f101bb0f4a23\", \"declaredArea\": null, \"address\": {\"id\": 3952751, \"formattedAddress\": \"Madhugiri, Karnataka 572132, India\", \"postalCode\": \"572132\", \"locality\": \"Madhugiri\", \"data\": null, \"administrativeAreaLevel5\": null, \"administrativeAreaLevel4\": null, \"administrativeAreaLevel3\": null, \"administrativeAreaLevel2\": \"Bangalore Division\", \"administrativeAreaLevel1\": \"Karnataka\", \"country\": \"India\", \"latitude\": 13.6643166, \"longitude\": 77.20889869999999, \"placeId\": \"ChIJsfkoVqO0sTsRLbvVqd06cTU\", \"sublocalityLevel1\": \"\", \"sublocalityLevel2\": \"\", \"sublocalityLevel3\": null, \"sublocalityLevel4\": null, \"sublocalityLevel5\": null, \"houseNo\": \"\", \"buildingName\": \"\", \"landmark\": \"\", \"clientId\": \"3bbef759-8ab1-4cbb-a9b3-0326bdd1a22b\"}, \"farmerCode\": \"RSDF2\", \"isDeleted\": false, \"email\": null, \"deviceToken\": null, \"deviceType\": null, \"isAcreSquareEnabled\": null, \"isGDPRCompliant\": true, \"companyId\": 1251, \"createdDate\": \"2025-02-13T05:13:55.461Z\", \"lastModifiedDate\": \"2026-01-08T02:57:50.224Z\", \"loginType\": null, \"externalId\": null, \"assignedTo\": [{\"id\": 3388201, \"name\": \"RS qa2 user 1\", \"data\": {\"geoIds\": [656497], \"environment\": \"dev\", \"isExecutiveProfileEnabled\": true, \"isSREnabled\": true, \"srRegionEnabled\": true}, \"assignedManagersName\": [], \"conversionFactor\": null, \"managers\": [3426151], \"userStatus\": \"ACTIVE\", \"location\": null, \"contactNumber\": \"1234560001\", \"email\": \"rsqazone2user1@cropin.com\", \"preferences\": {\"id\": 3388251, \"currency\": \"INR\", \"language\": \"en\", \"timeZone\": \"IST\", \"areaUnits\": \"ACRE\", \"locale\": \"en-IN\", \"data\": {\"cropPreferences\": [], \"cropUnit\": \"Tons\", \"planTypePreferences\": [], \"farmerTag\": [], \"assetTag\": [], \"caTag\": [], \"precipitationUnit\": \"Inches\", \"tempratureUnit\": \"Celsius\", \"projectPreferences\": [{\"id\": 2405651, \"name\": \"RS Test Plot Risk\", \"status\": \"CURRENT\"}, {\"id\": 3587001, \"name\": \"RS Multi Project 1\", \"status\": \"CURRENT\"}, {\"id\": 3574751, \"name\": \"RS Dashboard Map testing\", \"status\": \"CURRENT\"}, {\"id\": 3587601, \"name\": \"RS Multi Project 2\", \"status\": \"CURRENT\"}, {\"id\": 3587602, \"name\": \"RS Multi Project 3\", \"status\": \"CURRENT\"}, {\"id\": 5918751, \"name\": \"RS PR Filter 21\", \"status\": \"CURRENT\"}, {\"id\": 5925601, \"name\": \"RS PR UAT 4 qazone2\", \"status\": \"CURRENT\"}, {\"id\": 5927351, \"name\": \"RS New UI testing\", \"status\": \"CURRENT\"}, {\"id\": 5928601, \"name\": \"new-Project-18-12-25-001\", \"status\": \"CURRENT\"}, {\"id\": 5928603, \"name\": \"RS PR UAT 5 qazone2\", \"status\": \"CURRENT\"}]}, \"locations\": null}, \"address\": null, \"assignedTo\": null, \"managersName\": null, \"companyId\": 1251, \"parentCompanyId\": null, \"userRoleId\": 3571401, \"userRoleName\": \"RS New Planet user role\", \"correspondingKcId\": null, \"resources\": null, \"countryCode\": \"+91\", \"companyStatus\": null, \"clientId\": \"140c434e-73a5-43c6-8105-07a0111cc263\", \"images\": {}, \"companyPreferences\": null, \"locations\": {\"id\": 2901, \"name\": \"Madhugiri\", \"administrativeAreaLevel5\": null, \"administrativeAreaLevel4\": null, \"administrativeAreaLevel3\": null, \"administrativeAreaLevel2\": \"Tumkur\", \"administrativeAreaLevel1\": \"Karnataka\", \"country\": \"India\", \"latitude\": null, \"longitude\": null, \"sublocalityLevel1\": null, \"sublocalityLevel2\": null, \"sublocalityLevel3\": null, \"sublocalityLevel4\": null, \"sublocalityLevel5\": null, \"geoInfo\": {\"type\": \"FeatureCollection\", \"features\": [{\"type\": \"Feature\", \"geometry\": {\"type\": \"Polygon\", \"coordinates\": [[[77.20161447330734, 13.65524492156377], [77.22195632577765, 13.65524492156377], [77.22195632577765, 13.66900637679743], [77.20161447330734, 13.66900637679743], [77.20161447330734, 13.65524492156377]]]}, \"properties\": {}}]}, \"bounds\": {\"southwest\": {\"lat\": 13.65524492156377, \"lng\": 77.20161447330734}, \"northeast\": {\"lat\": 13.66900637679743, \"lng\": 77.22195632577765}}, \"placeId\": \"ChIJsfkoVqO0sTsRLbvVqd06cTU\"}, \"enabled\": true, \"isAcreSquareUser\": false, \"isGDPRCompliant\": true, \"lastModifiedDate\": \"2026-01-07T09:46:38.318Z\", \"loginType\": null, \"executiveRoleUser\": false, \"preferredName\": \"1234560001\", \"deviceToken\": null, \"deviceType\": null, \"createdBy\": \"2899701\", \"lastModifiedBy\": \"3388201\", \"deleted\": false}], \"massUpload\": false, \"deleted\": false, \"acreSquareEnabled\": null}, \"status\": \"Success\", \"result\": \"Successfully added tag 'Raja farmer UAT check active' to Farmer ID '3952701'.\"}]}\r\n",
  "timestamp": "2026-01-08T03:06:22.392Z"
}